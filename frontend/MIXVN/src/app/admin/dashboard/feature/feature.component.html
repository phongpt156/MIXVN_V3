<form class="p-5">
  <fieldset>
    <legend>
      Manage Feature
    </legend>
    <div>
      <div class="text-right">
        <button md-button color="add" (click)="openAddFeatureModal()" type="button" class="text-white">Add Feature</button>
      </div>
      <div class="mt-3 table-wrapper">
        <table class="table table-responsive table-inverse table-hover">
          <thead>
            <tr>
              <th><h3>STT</h3></th>
              <th><h3>Name</h3></th>
              <th><h3>Order</h3></th>
              <th><h3>Active</h3></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let feature of featureService.features; let i = index">
              <tr (click)="listCollapsed[feature.id] = !listCollapsed[feature.id]" style="cursor: pointer">
                <td><h4>{{ i + 1 }}</h4></td>
                <td><h4>{{ feature.name }}</h4></td>
                <td><h4>{{ feature.order }}</h4></td>
                <td>
                  <md-checkbox [checked]="feature.active" readonly="readonly" click-prevent-default></md-checkbox>
                </td>
                <td class="d-flex flex-row">
                  <a (click)="openEditFeatureModal($event, feature)"><i class="material-icons tex-white">mode_edit</i></a>
                  <a (click)="openDeleteFeatureModal($event, feature.id)"><i class="material-icons">delete_forever</i></a>
                </td>
              </tr>
              <tr [collapse]="listCollapsed[feature.id]" class="bg-custom">
                <td>Vn Name</td>
                <td>Dev Name</td>
                <td>Order</td>
                <td>Active</td>
                <td>
                  <a (click)="openAddFeatureValueModal(feature)"><i class="material-icons">add_circle</i></a>
                </td>
              </tr>
              <tr *ngFor="let featureValue of feature.feature_values" [collapse]="listCollapsed[feature.id]" class="bg-custom">
                <td>{{ featureValue.vi_name }}</td>
                <td>{{ featureValue.dev_name }}</td>
                <td>{{ featureValue.order }}</td>
                <td>
                  <md-checkbox [checked]="featureValue.active" readonly="readonly" click-prevent-default></md-checkbox>
                </td>
                <td>
                  <a (click)="openEditFeatureValueModal(featureValue)"><i class="material-icons">mode_edit</i></a>
                  <a (click)="openDeleteFeatureValueModal(featureValue.id)"><i class="material-icons">delete_forever</i></a>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </fieldset>
</form>

<!-- delete feature modal -->
<ng-template #deleteFeatureModal>
<div class="modal-header">
  <h4 class="modal-title pull-left">Delete Feature</h4>
  <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <p>Are you sure to delete this Feature?</p>
  <div class="text-right">
    <button md-button type="submit" class="submit text-white" (click)="deleteFeature()">Delete</button>
    <button md-button type="submit" class="submit text-white" (click)="bsModalRef.hide()">Cancel</button>
  </div>
</div>
</ng-template>

<!-- delete feature value modal -->
<ng-template #deleteFeatureValueModal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Delete Feature Value</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>Are you sure to delete this Feature Value?</p>
    <div class="text-right">
      <button md-button type="submit" class="submit text-white" (click)="deleteFeatureValue()">Delete</button>
      <button md-button type="submit" class="submit text-white" (click)="bsModalRef.hide()">Cancel</button>
    </div>
  </div>
</ng-template>
